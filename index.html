<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phalar | Intro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@500;700&family=Manrope:wght@300;400;600&family=Spline+Sans+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --ink: #f3f0eb;
            --muted: rgba(243, 240, 235, 0.6);
            --accent: #8dd9ff;
            --accent-2: #b388ff;
            --glass: rgba(16, 18, 22, 0.72);
            --border: rgba(243, 240, 235, 0.16);
            --shadow: rgba(0, 0, 0, 0.55);
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Manrope', sans-serif;
            color: var(--ink);
            background: #050507;
        }

        .video-wrap {
            position: fixed;
            inset: 0;
            z-index: -10;
            overflow: hidden;
        }

        #player {
            width: 100%;
            height: 100%;
        }

        #player iframe {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100vw;
            height: 100vh;
            transform: translate(-50%, -50%) scale(1.2);
            pointer-events: none;
            border: none;
        }

        .overlay {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 20% 20%, rgba(141, 217, 255, 0.16), transparent 50%),
                        radial-gradient(circle at 80% 70%, rgba(179, 136, 255, 0.18), transparent 55%),
                        linear-gradient(140deg, rgba(5, 5, 7, 0.88), rgba(5, 5, 7, 0.72));
            z-index: -9;
        }

        .particles {
            position: fixed;
            inset: 0;
            z-index: -8;
            pointer-events: none;
            opacity: 0.9;
            mix-blend-mode: screen;
            image-rendering: pixelated;
        }

        .pixel-grid {
            position: fixed;
            inset: 0;
            z-index: -7;
            opacity: 0.18;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.06) 1px, transparent 1px);
            background-size: 10px 10px;
            image-rendering: pixelated;
        }

        .scanlines {
            position: fixed;
            inset: 0;
            z-index: -6;
            opacity: 0.1;
            background: repeating-linear-gradient(
                to bottom,
                rgba(255, 255, 255, 0.04),
                rgba(255, 255, 255, 0.04) 1px,
                transparent 1px,
                transparent 4px
            );
        }

        .grain {
            position: fixed;
            inset: 0;
            opacity: 0.18;
            z-index: -5;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180' viewBox='0 0 180 180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='0.25'/%3E%3C/svg%3E");
            mix-blend-mode: soft-light;
        }

        .enter-screen {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(5, 5, 7, 0.92);
            z-index: 5;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }

        .enter-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .enter-button {
            width: clamp(64px, 10vw, 88px);
            height: clamp(64px, 10vw, 88px);
            border-radius: 50%;
            border: 1px solid rgba(141, 217, 255, 0.5);
            background: rgba(141, 217, 255, 0.08);
            cursor: pointer;
            position: relative;
            box-shadow: 0 0 25px rgba(141, 217, 255, 0.25);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .enter-button::before {
            content: '';
            position: absolute;
            inset: -18px;
            border-radius: 50%;
            border: 1px solid rgba(141, 217, 255, 0.35);
            animation: pulse 2.2s ease-in-out infinite;
        }

        .enter-button::after {
            content: '';
            position: absolute;
            inset: 18px;
            border-radius: 50%;
            background: rgba(141, 217, 255, 0.6);
            box-shadow: 0 0 12px rgba(141, 217, 255, 0.6);
        }

        .enter-button:hover {
            transform: scale(1.04);
            box-shadow: 0 0 35px rgba(141, 217, 255, 0.4);
        }

        .stage {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0;
            transform: translateY(24px);
            transition: opacity 0.8s ease 0.2s, transform 0.8s ease 0.2s;
        }

        .stage.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .card {
            position: relative;
            width: min(92vw, 820px);
            border-radius: 22px;
            padding: clamp(2rem, 5vw, 2.6rem);
            background: var(--glass);
            border: 1px solid var(--border);
            box-shadow: 0 25px 60px var(--shadow);
            backdrop-filter: blur(18px);
            display: grid;
            gap: 1.4rem;
            justify-items: center;
            animation: float 6s ease-in-out infinite;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(140deg, rgba(141, 217, 255, 0.08), transparent 60%);
            pointer-events: none;
        }

        .name {
            font-family: 'Unbounded', sans-serif;
            font-size: clamp(2.3rem, 6vw, 3.8rem);
            letter-spacing: 0.18em;
            text-transform: uppercase;
            text-align: center;
            z-index: 1;
        }

        .icon-row {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            z-index: 1;
        }

        .icon-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            border: 1px solid var(--border);
            color: var(--ink);
            text-decoration: none;
            background: rgba(255, 255, 255, 0.04);
            transition: transform 0.2s ease, border 0.2s ease, box-shadow 0.2s ease;
        }

        .icon-link:hover {
            transform: translateY(-2px);
            border-color: rgba(141, 217, 255, 0.6);
            box-shadow: 0 0 20px rgba(141, 217, 255, 0.3);
        }

        .server-row {
            width: min(100%, 560px);
            display: grid;
            place-items: center;
            padding: 1rem 1.2rem;
            border-radius: 14px;
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.04);
            text-decoration: none;
            transition: transform 0.2s ease, border 0.2s ease, box-shadow 0.2s ease;
            z-index: 1;
        }

        .server-row:hover {
            transform: translateY(-2px);
            border-color: rgba(141, 217, 255, 0.6);
            box-shadow: 0 0 25px rgba(141, 217, 255, 0.25);
        }

        .server-icon {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            object-fit: cover;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.08);
        }

        .controls {
            position: fixed;
            left: 50%;
            bottom: 1.4rem;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.7rem 1rem;
            border-radius: 999px;
            border: 1px solid var(--border);
            background: rgba(10, 12, 16, 0.65);
            backdrop-filter: blur(16px);
            opacity: 0;
            transition: opacity 0.4s ease, transform 0.4s ease;
            z-index: 2;
        }

        .controls.visible {
            opacity: 1;
        }

        .icon-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            display: grid;
            place-items: center;
            background: rgba(255, 255, 255, 0.06);
            color: var(--ink);
            cursor: pointer;
            transition: transform 0.2s ease, background 0.2s ease;
        }

        .icon-btn:hover {
            transform: translateY(-1px);
            background: rgba(141, 217, 255, 0.2);
        }

        .progress-wrap {
            display: flex;
            min-width: clamp(160px, 30vw, 260px);
        }

        .progress-slider,
        .volume-slider {
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }

        .progress-slider {
            width: 100%;
        }

        .progress-slider::-webkit-slider-thumb,
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent);
            box-shadow: 0 0 10px rgba(141, 217, 255, 0.5);
        }

        .progress-slider::-moz-range-thumb,
        .volume-slider::-moz-range-thumb {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: none;
            background: var(--accent);
        }

        .volume-slider {
            width: 90px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-6px); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(0.9); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        @media (max-width: 720px) {
            .controls {
                width: calc(100% - 2rem);
                flex-wrap: wrap;
                gap: 0.6rem;
            }

            .progress-wrap {
                width: 100%;
                min-width: 0;
            }

            .volume-slider {
                width: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="video-wrap">
        <div id="player"></div>
    </div>
    <div class="overlay"></div>
    <canvas class="particles" id="particleCanvas" aria-hidden="true"></canvas>
    <div class="pixel-grid"></div>
    <div class="scanlines"></div>
    <div class="grain"></div>

    <div class="enter-screen" id="enterScreen">
        <button class="enter-button" id="enterBtn" aria-label="Enable sound"></button>
    </div>

    <main class="stage" id="mainContent">
        <section class="card">
            <div class="name">Phalar</div>

            <div class="icon-row" aria-label="Social links">
                <a class="icon-link" href="https://www.instagram.com/victor.radu.88/" target="_blank" rel="noopener" aria-label="Instagram">
                    <i class="fa-brands fa-instagram"></i>
                </a>
                <a class="icon-link" href="https://discord.com/users/1410811777985282139" target="_blank" rel="noopener" aria-label="Discord">
                    <i class="fa-brands fa-discord"></i>
                </a>
                <a class="icon-link" href="https://steamcommunity.com/profiles/76561199154609247/" target="_blank" rel="noopener" aria-label="Steam">
                    <i class="fa-brands fa-steam"></i>
                </a>
                <a class="icon-link" href="https://www.phalarthao.site/" target="_blank" rel="noopener" aria-label="Web design">
                    <i class="fa-solid fa-globe"></i>
                </a>
            </div>

            <a class="server-row" href="https://discord.gg/GUYEHc2B6z" target="_blank" rel="noopener" aria-label="Join Discord server">
                <img class="server-icon" src="https://cdn.discordapp.com/embed/avatars/0.png" alt="Discord server icon">
            </a>
        </section>
    </main>

    <div class="controls" id="mediaControls" aria-label="Media controls">
        <button class="icon-btn" id="playPauseBtn" title="Play or pause">
            <i class="fa-solid fa-pause"></i>
        </button>

        <div class="progress-wrap">
            <input class="progress-slider" id="progressSlider" type="range" min="0" max="100" value="0" aria-label="Clip position">
        </div>

        <button class="icon-btn" id="muteBtn" title="Mute or unmute">
            <i class="fa-solid fa-volume-xmark"></i>
        </button>

        <input class="volume-slider" id="volumeSlider" type="range" min="0" max="100" value="40" aria-label="Volume">
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;
        let isPlaying = false;
        let isMuted = true;
        let isEntered = false;
        let duration = 0;
        let progressTimer;
        let isScrubbing = false;

        const enterScreen = document.getElementById('enterScreen');
        const enterBtn = document.getElementById('enterBtn');
        const mainContent = document.getElementById('mainContent');
        const mediaControls = document.getElementById('mediaControls');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const muteBtn = document.getElementById('muteBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const progressSlider = document.getElementById('progressSlider');

        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let w = 0;
        let h = 0;

        function resizeCanvas() {
            const dpr = window.devicePixelRatio || 1;
            w = window.innerWidth;
            h = window.innerHeight;
            canvas.width = Math.floor(w * dpr);
            canvas.height = Math.floor(h * dpr);
            canvas.style.width = `${w}px`;
            canvas.style.height = `${h}px`;
            ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
            buildParticles();
        }

        function buildParticles() {
            const count = Math.min(180, Math.max(90, Math.floor(w / 8)));
            particles = Array.from({ length: count }, () => {
                const palette = ['rgba(141,217,255,', 'rgba(179,136,255,', 'rgba(255,255,255,'];
                return {
                    x: Math.random() * w,
                    y: Math.random() * h,
                    size: Math.random() * 2 + 1,
                    speedX: (Math.random() - 0.5) * 0.25,
                    speedY: 0.15 + Math.random() * 0.35,
                    alpha: 0.15 + Math.random() * 0.5,
                    fade: Math.random() * 0.02 + 0.01,
                    color: palette[Math.floor(Math.random() * palette.length)]
                };
            });
        }

        function animateParticles() {
            ctx.clearRect(0, 0, w, h);
            for (const p of particles) {
                p.x += p.speedX;
                p.y += p.speedY;
                p.alpha += (Math.random() - 0.5) * p.fade;
                if (p.alpha < 0.05) p.alpha = 0.05;
                if (p.alpha > 0.9) p.alpha = 0.9;
                if (p.y > h + 10) {
                    p.y = -10;
                    p.x = Math.random() * w;
                }
                if (p.x < -10) p.x = w + 10;
                if (p.x > w + 10) p.x = -10;
                ctx.fillStyle = `${p.color}${p.alpha})`;
                ctx.fillRect(p.x, p.y, p.size, p.size);
            }
            requestAnimationFrame(animateParticles);
        }

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                videoId: 'FFfdyV8gnWk',
                playerVars: {
                    autoplay: 1,
                    controls: 0,
                    rel: 0,
                    modestbranding: 1,
                    playsinline: 1,
                    loop: 1,
                    mute: 1,
                    playlist: 'FFfdyV8gnWk'
                },
                events: {
                    onReady: onPlayerReady,
                    onStateChange: onPlayerStateChange
                }
            });
        }

        function onPlayerReady() {
            player.setVolume(Number(volumeSlider.value));
            player.mute();
            player.playVideo();
            isPlaying = true;
            isMuted = true;
            updatePlayPauseIcon();
            updateMuteIcon();
            startProgressLoop();
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                isPlaying = true;
            } else if (event.data === YT.PlayerState.PAUSED) {
                isPlaying = false;
            } else if (event.data === YT.PlayerState.ENDED) {
                player.seekTo(0);
                player.playVideo();
                isPlaying = true;
            }
            updatePlayPauseIcon();
        }

        function updatePlayPauseIcon() {
            playPauseBtn.innerHTML = isPlaying
                ? '<i class="fa-solid fa-pause"></i>'
                : '<i class="fa-solid fa-play"></i>';
        }

        function updateMuteIcon() {
            muteBtn.innerHTML = isMuted
                ? '<i class="fa-solid fa-volume-xmark"></i>'
                : '<i class="fa-solid fa-volume-high"></i>';
        }

        function startProgressLoop() {
            if (progressTimer) {
                clearInterval(progressTimer);
            }
            progressTimer = setInterval(() => {
                if (!player || isScrubbing) return;
                const current = player.getCurrentTime();
                duration = player.getDuration() || duration;
                if (duration > 0) {
                    const progress = Math.min(100, (current / duration) * 100);
                    progressSlider.value = progress.toFixed(2);
                }
            }, 250);
        }

        function enterSite() {
            if (isEntered) return;
            isEntered = true;
            enterScreen.classList.add('hidden');
            mainContent.classList.add('visible');
            mediaControls.classList.add('visible');

            if (player) {
                player.unMute();
                isMuted = false;
                player.setVolume(Number(volumeSlider.value));
                updateMuteIcon();
            }
        }

        enterBtn.addEventListener('click', enterSite);
        enterScreen.addEventListener('click', (event) => {
            if (event.target === enterScreen) {
                enterSite();
            }
        });

        playPauseBtn.addEventListener('click', () => {
            if (!player) return;
            if (isPlaying) {
                player.pauseVideo();
            } else {
                player.playVideo();
            }
        });

        muteBtn.addEventListener('click', () => {
            if (!player) return;
            if (isMuted) {
                player.unMute();
                isMuted = false;
                if (Number(volumeSlider.value) === 0) {
                    volumeSlider.value = 40;
                    player.setVolume(40);
                }
            } else {
                player.mute();
                isMuted = true;
            }
            updateMuteIcon();
        });

        volumeSlider.addEventListener('input', (event) => {
            if (!player) return;
            const volume = Number(event.target.value);
            player.setVolume(volume);
            if (volume === 0) {
                player.mute();
                isMuted = true;
            } else if (isMuted) {
                player.unMute();
                isMuted = false;
            }
            updateMuteIcon();
        });

        progressSlider.addEventListener('input', () => {
            if (!duration) return;
            isScrubbing = true;
        });

        progressSlider.addEventListener('change', () => {
            if (!player || !duration) {
                isScrubbing = false;
                return;
            }
            const targetTime = (Number(progressSlider.value) / 100) * duration;
            player.seekTo(targetTime, true);
            isScrubbing = false;
        });

        document.addEventListener('keydown', (event) => {
            if (!isEntered) return;
            if (event.code === 'Space') {
                event.preventDefault();
                playPauseBtn.click();
            }
            if (event.code === 'KeyM') {
                muteBtn.click();
            }
        });

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        animateParticles();
    </script>
</body>
</html>
